{"version":3,"sources":["App.js","reportWebVitals.js","index.js","styles.module.css"],"names":["homepages","range","App","socketRef","useRef","abortTimeoutRef","useEffect","current","io","socket","on","onStatusChange","onRoundComplete","onKeywordChange","onHomepageChange","onLinkBought","onError","onLogsRetrieved","onAbort","useState","isActive","setIsActive","isAborting","setIsAborting","counter","setCounter","keywords","setKeywords","status","setStatus","itemFound","setItemFound","currentHomepage","setCurrentHomepage","itemsBought","setItemsBought","showTooltip","setShowTooltip","e","a","preventDefault","data","FormData","target","entries","slice","filter","el","map","length","console","log","emit","setTimeout","keys","items","file","Blob","Uint8Array","saveAs","clearTimeout","Container","fluid","className","styles","container","Row","Col","type","color","height","width","timeout","style","marginTop","src","alt","xs","line","onClick","onSubmit","homepageContainer","homepage","checkBox","name","defaultChecked","Object","field","onMouseEnter","onMouseLeave","fieldContainer","keyword","currency","format","price","defaultValue","start","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById","module","exports"],"mappings":"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","file":"static/js/main.7ec0a0c9.chunk.js","sourcesContent":["import styles from \"./styles.module.css\";\nimport { useState, useEffect, useRef } from \"react\";\nimport { io } from \"socket.io-client\";\nimport { Row, Col, Container } from \"react-bootstrap\";\nimport { saveAs } from \"file-saver\";\nimport Loader from \"react-loader-spinner\";\nimport { IoLogoEuro } from \"react-icons/io\";\n\nconst beURL = \"http://localhost:3000\";\n\nconst homepages = [\n  \"https://www.amazon.it\",\n  \"https://www.amazon.es\",\n  \"https://www.amazon.de\",\n  /* \"https://www.amazon.co.uk\", */\n];\n\nconst range = {\n  \"rtx 2060\": [200, 500],\n  \"rtx 2070\": [300, 600],\n  \"rtx 2080\": [500, 800],\n  \"rtx 2080ti\": [500, 1000],\n  \"rtx 3060\": [500, 700],\n  \"rtx 3070\": [500, 1200],\n  \"rtx 3080\": [800, 1700],\n  \"rtx 3090\": [1000, 2000],\n  /* gtx: [100, 500], */\n};\n\nfunction App() {\n  const socketRef = useRef();\n  const abortTimeoutRef = useRef(null);\n\n  useEffect(() => {\n    //init socketio\n    socketRef.current = io(beURL);\n    const socket = socketRef.current;\n    socket.on(\"status-change\", onStatusChange);\n    socket.on(\"round\", onRoundComplete);\n    socket.on(\"keyword-change\", onKeywordChange);\n    socket.on(\"homepage-change\", onHomepageChange);\n    socket.on(\"link-bought\", onLinkBought);\n    socket.on(\"error\", onError);\n    socket.on(\"logs\", onLogsRetrieved);\n    socket.on(\"abort\", onAbort);\n  }, []);\n  // SOCKET LISTENING EVENTS\n\n  const [isActive, setIsActive] = useState(false);\n  const [isAborting, setIsAborting] = useState(false);\n  const [counter, setCounter] = useState(0);\n  const [keywords, setKeywords] = useState([]);\n  const [status, setStatus] = useState(\"\");\n  const [itemFound, setItemFound] = useState(null);\n  const [currentHomepage, setCurrentHomepage] = useState(\"\");\n  const [itemsBought, setItemsBought] = useState([]);\n  const [showTooltip, setShowTooltip] = useState(false);\n\n  //HANDLERS\n\n  async function onSubmit(e) {\n    e.preventDefault();\n    setIsActive(true);\n    const data = [...new FormData(e.target).entries()];\n    const homepages = data\n      .slice(0, 3)\n      .filter((el) => el[1] === \"on\")\n      .map((el) => el[0]);\n    const range = data.slice(3, data.length);\n    console.log(homepages, range);\n    socketRef.current.emit(\"start\", {\n      homepages,\n      range,\n    });\n  }\n\n  async function socketStop() {\n    console.log(\"STOP CLICKED\");\n    socketRef.current.emit(\"abort\");\n    setIsAborting(true);\n    abortTimeoutRef.current = setTimeout(() => {\n      setIsActive(false);\n      setIsAborting(false);\n    }, 15000);\n    //isActive is set to falseonly when asynchronously receiving the abort message from server\n  }\n\n  async function onStatusChange(data) {\n    setStatus(data);\n  }\n\n  async function onRoundComplete(data) {\n    setKeywords([]);\n    setCounter(data);\n  }\n\n  async function onKeywordChange(data) {\n    setKeywords((keys) => [...keys, data]);\n  }\n\n  async function onHomepageChange(data) {\n    setKeywords([]);\n    setCurrentHomepage(data);\n  }\n\n  async function onLinkBought(data) {\n    setItemsBought((items) => [...items, data]);\n    setItemFound(data);\n  }\n\n  async function onError() {\n    setCurrentHomepage(\"Error\");\n    setItemFound(\"Error\");\n    setKeywords(\"Error\");\n    setCounter(\"Error\");\n    setStatus(\"Error\");\n    setIsActive(false);\n  }\n\n  async function onLogsRetrieved(data) {\n    console.log(\"LOGS:\", data);\n    const file = new Blob([new Uint8Array(data)]);\n    console.log(file);\n    saveAs(file, \"log.txt\");\n  }\n  async function retrieveLogs() {\n    socketRef.current.emit(\"retrieve-logs\");\n  }\n\n  function onAbort() {\n    clearTimeout(abortTimeoutRef.current);\n    setIsActive(false);\n    setIsAborting(false);\n    setItemsBought([]);\n    setItemFound(\"\");\n  }\n\n  return (\n    <Container fluid className={styles.container}>\n      <Row>\n        <Col>\n          {isAborting ? (\n            <>\n              <Loader\n                type=\"Puff\"\n                color=\"#00BFFF\"\n                height={100}\n                width={100}\n                timeout={20000} //3 secs\n              />\n              \"Aborting...\"\n            </>\n          ) : (\n            <>\n              <Row>\n                <Col className=\"d-flex align-items-start\">\n                  <h1>Amazon Crawler</h1>\n                  <img\n                    style={{ width: \"85px\", marginTop: \"-1px\" }}\n                    src=\"/amazon.png\"\n                    alt=\"logo\"\n                  />\n                </Col>\n                <Col xs={12} className={styles.line}></Col>\n              </Row>\n              {!isActive ? (\n                <form onSubmit={onSubmit}>\n                  <Row>\n                    <Col xs={12} className={styles.homepageContainer}>\n                      {homepages.map((homepage) => (\n                        <Row>\n                          <Col xs={12} className=\"d-flex align-items-center\">\n                            <label className=\"\">{homepage}</label>\n                            <input\n                              className={styles.checkBox}\n                              name={homepage}\n                              type={\"checkbox\"}\n                              defaultChecked\n                            />\n                          </Col>\n                        </Row>\n                      ))}\n                    </Col>\n                    <Col xs={12} className={styles.line}></Col>\n                    <Col className=\"d-flex flex-column justify-content-center align-items-center\">\n                      <Row>\n                        {Object.entries(range).map((field) => (\n                          <Col\n                            onMouseEnter={() => setShowTooltip(field[0])}\n                            onMouseLeave={() => setShowTooltip(null)}\n                            xs={12}\n                            className={styles.fieldContainer}\n                          >\n                            <div>\n                              <h4 className={styles.keyword}>{field[0]}</h4>\n                              <span className={styles.currency}>\n                                <IoLogoEuro />\n                              </span>\n                              {showTooltip === field[0] && (\n                                <span className={styles.format}>\n                                  ( <u>Format:</u> xxx-yyy )\n                                </span>\n                              )}\n                              <input\n                                className={styles.price}\n                                type=\"text\"\n                                name={field[0]}\n                                defaultValue={`${field[1][0]}-${field[1][1]}`}\n                              />\n                            </div>\n                          </Col>\n                        ))}\n                        <Col\n                          xs={12}\n                          className=\"d-flex flex-column justify-content-center align-items-center\"\n                        >\n                          {\" \"}\n                          <button className={styles.start} type=\"submit\">\n                            START CRAWL\n                          </button>\n                        </Col>\n                      </Row>\n                    </Col>\n                  </Row>\n                </form>\n              ) : (\n                <>\n                  <div>\n                    <h3> Status:</h3>\n                    {status}\n                  </div>\n                  <div>\n                    <h3> Crawl Round:</h3>\n                    {counter}\n                  </div>\n                  <div>\n                    <h3> Searching on:</h3>\n                    {currentHomepage}\n                  </div>\n                  <div>\n                    <h3> Searching Keywords:</h3>\n                    {keywords}\n                  </div>\n                  <div>\n                    <h3> Item Found:</h3>\n                    {itemFound}\n                  </div>\n                  <div>\n                    <h3>Items Bought:</h3>\n                    {itemsBought}\n                  </div>\n\n                  <button onClick={retrieveLogs}>Download Logs</button>\n                  <button onClick={socketStop}>STOP CRAWL</button>\n                </>\n              )}\n            </>\n          )}\n        </Col>\n      </Row>\n    </Container>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport reportWebVitals from \"./reportWebVitals\";\nimport \"bootstrap/dist/css/bootstrap.min.css\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"homepageContainer\":\"styles_homepageContainer__A0QkF\",\"fieldContainer\":\"styles_fieldContainer__2iQ3G\",\"checkBox\":\"styles_checkBox__32zkx\",\"line\":\"styles_line__1SXl1\",\"keyword\":\"styles_keyword__2sRY2\",\"currency\":\"styles_currency__2GaLX\",\"price\":\"styles_price__2PM5k\",\"format\":\"styles_format__3vY_J\",\"start\":\"styles_start__1nKdO\"};"],"sourceRoot":""}